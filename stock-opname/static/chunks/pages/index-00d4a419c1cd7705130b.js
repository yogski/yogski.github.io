(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{6694:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return I}});var r=n(5893),o=n(7757),a=n.n(o),c=n(2137),i=n(5061),u=n(6156),d=n(5779),l=n(9650),m=n(9181),s=n(1577),f=n(8470),p=n(4990),y=n(4505),h=n(6511),v=n(3695),_=n(7294),g=n(3461),b=n(8648),j=function(e){b.Z.info({message:"Info",description:e,duration:1.6})},x=function(e){b.Z.error({message:"Error",description:e,duration:3})};function F(){var e=Z(),t=localStorage.getItem("".concat(e))||"";return JSON.parse(t)}function Z(){return localStorage.getItem("keymaster")}function k(e){var t,n,r;for(n=0,r=e.length;n<r;n++)if(!((t=e.charCodeAt(n))>47&&t<58)&&!(t>64&&t<91)&&!(t>96&&t<123))return!1;return!0}function C(e){for(var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=3735928559^n,o=1103547991^n,a=0;a<e.length;a++)t=e.charCodeAt(a),r=Math.imul(r^t,2654435761),o=Math.imul(o^t,1597334677);return r=Math.imul(r^r>>>16,2246822507)^Math.imul(o^o>>>13,3266489909),4294967296*(2097151&(o=Math.imul(o^o>>>16,2246822507)^Math.imul(r^r>>>13,3266489909)))+(r>>>0)}var N=n(5341),w=n.n(N);function O(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function S(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?O(Object(n),!0).forEach((function(t){(0,u.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):O(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function I(){var e={barcodeForm:"",productNameForm:"",editFormCode:"",editFormName:"",editFormQuantity:0},t=(0,_.useState)(e),n=t[0],o=t[1],b=(0,_.useState)([]),N=b[0],O=b[1],I=(0,_.useState)(!1),E=I[0],D=I[1],q=(0,_.useState)(!1),P=q[0],H=q[1];(0,_.useEffect)((function(){}),[N]);var A=d.Z.Search,M=[{title:"Barcode",dataIndex:"code",key:"code",sorter:{compare:function(e,t){return e.code-t.code},multiple:1},render:function(e){return(0,r.jsx)("a",{children:e})}},{title:"Product Name",dataIndex:"name",key:"name",sorter:{compare:function(e,t){return e.name.localeCompare(t.name)},multiple:2}},{title:"Quantity",dataIndex:"quantity",key:"quantity",sorter:{compare:function(e,t){return e.quantity-t.quantity},multiple:3}},{title:"Action",key:"action",dataIndex:"key",render:function(e){return(0,r.jsxs)(l.Z,{size:"middle",children:[(0,r.jsx)(m.Z,{content:"Edit Record",children:(0,r.jsx)(s.Z,{type:"primary",icon:(0,r.jsx)(h.Z,{}),size:"middle",onClick:function(){return L(!0,e)}})}),(0,r.jsx)(m.Z,{content:"Delete Record",children:(0,r.jsx)(s.Z,{type:"primary",icon:(0,r.jsx)(v.Z,{}),size:"middle",danger:!0,onClick:function(){return B(e)}})})]})}}],Q=function(e){var t=e.target,r=t.name,a=t.value;o(S(S({},n),{},(0,u.Z)({},r,a)))},z=function(){o(e)},B=function(e){O(N.filter((function(t){return t.key!==e}))),j("Record with identifier ".concat(e," has been deleted."))},L=function(e,t){if(t){var r=N.filter((function(e){return e.key===t}))[0];o(S(S({},n),{},{editFormCode:r.code,editFormName:r.name,editFormQuantity:r.quantity}))}H(e)},R=function(){var e=(0,c.Z)(a().mark((function e(t){var r,o,c;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(""!==(r=n.barcodeForm.replaceAll(/\s/g,""))&&k(r)){e.next=5;break}return x("invalid barcode format: '".concat(r,"'")),z(),e.abrupt("return");case 5:return-1!==(o=N.findIndex((function(e){return e.code===r})))?(N[o].quantity++,O(N),j("".concat(N[o].name," (").concat(N[o].code,"): quantity updated.")),z()):(null===(c=document.getElementById("productNameForm"))||void 0===c||c.focus(),D(!0)),e.abrupt("return");case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return(0,r.jsx)(r.Fragment,{children:(0,r.jsxs)("div",{className:w().container,children:[(0,r.jsx)("h1",{className:w().title,children:"Stock Opname"}),(0,r.jsx)(A,{className:w().searchbar,id:"barcodeForm",name:"barcodeForm",value:n.barcodeForm,placeholder:"input barcode here ...",allowClear:!0,enterButton:"Add",size:"large",onChange:Q,onSearch:R}),E?(0,r.jsx)(d.Z,{className:w().searchbar,id:"productNameForm",name:"productNameForm",value:n.productNameForm,placeholder:"Input product name, then press Enter",allowClear:!0,autoFocus:!0,size:"large",onChange:Q,onPressEnter:function(){var e,t={code:n.barcodeForm.replaceAll(/\s/g,""),name:n.productNameForm,quantity:1,key:C(n.barcodeForm)};O([].concat((0,i.Z)(N),[t])),D(!1),j("".concat(t.name," (").concat(t.code,"): new product added.")),z(),null===(e=document.getElementById("barcodeForm"))||void 0===e||e.focus()}}):null,P?function(){var e={code:n.editFormCode.replaceAll(/\s/g,""),name:n.editFormName,quantity:n.editFormQuantity,key:C(n.editFormCode)};return(0,r.jsx)(f.Z,{visible:P,title:"Edit Record",footer:[(0,r.jsx)(s.Z,{type:"primary",danger:!0,onClick:function(){return L(!1)},children:"Cancel"},"cancel"),(0,r.jsx)(s.Z,{type:"primary",onClick:function(){return function(e){var t,n;if(""===e.code||!k(e.code))return x("invalid barcode format: '".concat(e.code,"'")),z(),void(null===(n=document.getElementById("barcodeForm"))||void 0===n||n.focus());O([].concat((0,i.Z)(N.filter((function(t){return t.key!==e.key}))),[e])),L(!1),null===(t=document.getElementById("barcodeForm"))||void 0===t||t.focus()}(e)},children:"Save"},"save")],children:(0,r.jsxs)(l.Z,{direction:"vertical",style:{width:"100%"},children:[(0,r.jsxs)(p.Z,{children:[(0,r.jsx)("label",{children:"Name"}),(0,r.jsx)(d.Z,{id:"editFormName",name:"editFormName",value:n.editFormName,allowClear:!0,onChange:Q})]}),(0,r.jsxs)(p.Z,{children:[(0,r.jsx)("label",{children:"Quantity"}),(0,r.jsx)(d.Z,{id:"editFormQuantity",name:"editFormQuantity",value:n.editFormQuantity,allowClear:!0,onChange:Q})]})]})})}():null,N.length>0?(0,r.jsxs)(l.Z,{children:[(0,r.jsx)(s.Z,{children:(0,r.jsx)(g.CSVLink,{data:function(){var e=[];return N.forEach((function(t){e.push({code:t.code,name:t.name,quantity:t.quantity})})),e}(),separator:",",filename:function(){var e=new Date;return"csv_stockopname_".concat(e.toLocaleDateString("id-ID"),"_").concat(Number(e).toString(16),".csv")}(),children:"Download CSV"})}),(0,r.jsx)(s.Z,{onClick:function(){return function(e){var t,n=new Date;Z()?t=Z():(t=Number(n).toString(16),localStorage.setItem("keymaster",t)),localStorage.setItem(t,JSON.stringify(e))}(N)},children:"Save Inventory"}),(0,r.jsx)(s.Z,{onClick:function(){return O(F())},children:"Load Inventory"})]}):(0,r.jsx)(l.Z,{children:(0,r.jsx)(s.Z,{onClick:function(){return O(F())},children:"Load Inventory"})}),(0,r.jsx)(y.Z,{className:w().tableDisplay,columns:M,dataSource:N})]})})}},5301:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return n(6694)}])},5341:function(e){e.exports={container:"Home_container__sDexO",main:"Home_main__1gTMt",footer:"Home_footer__34ULc",title:"Home_title__38XO6",description:"Home_description__p2VX9",code:"Home_code__7lt7E",grid:"Home_grid__2Clz5",card:"Home_card__2kgLM",logo:"Home_logo__qxZJS",searchbar:"Home_searchbar__pvvy5",tableDisplay:"Home_tableDisplay__17AIK"}}},function(e){e.O(0,[774,456,296],(function(){return t=5301,e(e.s=t);var t}));var t=e.O();_N_E=t}]);