(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{491:function(e,r,t){"use strict";t.r(r),t.d(r,{default:function(){return y}});var n=t(5893),o=t(5061),a=t(7757),c=t.n(a),u=t(2137),i=t(6156),d=t(5779),s=t(9650),l=t(1636),m=t(8222),f=t(1683),p=t(7294),_=t(5341),h=t.n(_),b=t(3461);function g(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}function v(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?g(Object(t),!0).forEach((function(r){(0,i.Z)(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):g(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}function y(){var e=(0,p.useState)({barcodeForm:"",productNameForm:""}),r=e[0],t=e[1],a=(0,p.useState)([]),_=a[0],g=a[1],y=(0,p.useState)(!1),j=y[0],O=y[1];(0,p.useEffect)((function(){console.log(_)}),[_]);var x=d.Z.Search,w=[{title:"Barcode",dataIndex:"code",key:"code",render:function(e){return(0,n.jsx)("a",{children:e})}},{title:"Product Name",dataIndex:"name",key:"name"},{title:"Quantity",dataIndex:"quantity",key:"quantity"},{title:"Action",key:"action",render:function(e,r){return(0,n.jsx)(s.Z,{size:"middle",children:(0,n.jsx)("a",{children:"Delete"})})}}],N=function(e){l.Z.info({message:"Info",description:e,duration:1.6})},F=function(e){var r,t,n;for(t=0,n=e.length;t<n;t++)if(!((r=e.charCodeAt(t))>47&&r<58)&&!(r>64&&r<91)&&!(r>96&&r<123))return!1;return!0},k=function(e){var n=e.target,o=n.name,a=n.value;t(v(v({},r),{},(0,i.Z)({},o,a)))},E=function(){t({barcodeForm:"",productNameForm:""})},S=function(){var e=(0,u.Z)(c().mark((function e(t){var n,o,a;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(""!==(n=r.barcodeForm.replaceAll(/\s/g,""))&&F(n)){e.next=5;break}return t="invalid barcode format: '".concat(n,"'"),l.Z.error({message:"Error",description:t,duration:3}),E(),e.abrupt("return");case 5:return console.log("current input:",n),-1!==(o=_.findIndex((function(e){return e.code===n})))?(_[o].quantity++,g(_),N("".concat(_[o].name," (").concat(_[o].code,"): quantity updated.")),E()):(null===(a=document.getElementById("productNameForm"))||void 0===a||a.focus(),O(!0)),e.abrupt("return");case 9:case"end":return e.stop()}var t}),e)})));return function(r){return e.apply(this,arguments)}}();return(0,n.jsx)(n.Fragment,{children:(0,n.jsxs)("div",{className:h().container,children:[(0,n.jsx)("h1",{className:h().title,children:"Stock Opname"}),(0,n.jsx)(x,{className:h().searchbar,id:"barcodeForm",name:"barcodeForm",value:r.barcodeForm,placeholder:"input barcode here ...",allowClear:!0,enterButton:"Add",size:"large",onChange:k,onSearch:S}),j?(0,n.jsx)(d.Z,{className:h().searchbar,id:"productNameForm",name:"productNameForm",value:r.productNameForm,placeholder:"Input product name, then press Enter",allowClear:!0,autoFocus:!0,size:"large",onChange:k,onPressEnter:function(){var e,t={code:r.barcodeForm.replaceAll(/\s/g,""),name:r.productNameForm,quantity:1,key:_.length};g([].concat((0,o.Z)(_),[t])),O(!1),N("".concat(t.name," (").concat(t.code,"): new product added.")),E(),null===(e=document.getElementById("barcodeForm"))||void 0===e||e.focus()}}):null,_.length>0?(0,n.jsx)(m.Z,{children:(0,n.jsx)(b.CSVLink,{data:function(){var e=[];return _.forEach((function(r){e.push({code:r.code,name:r.name,quantity:r.quantity})})),e}(),separator:",",filename:function(){var e=new Date;return"csv_stockopname_".concat(e.toLocaleDateString("id-ID"),"_").concat(Number(e).toString(16),".csv")}(),children:"Download CSV"})}):null,(0,n.jsx)(f.Z,{columns:w,dataSource:_})]})})}},5301:function(e,r,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return t(491)}])},5341:function(e){e.exports={container:"Home_container__sDexO",main:"Home_main__1gTMt",footer:"Home_footer__34ULc",title:"Home_title__38XO6",description:"Home_description__p2VX9",code:"Home_code__7lt7E",grid:"Home_grid__2Clz5",card:"Home_card__2kgLM",logo:"Home_logo__qxZJS",searchbar:"Home_searchbar__pvvy5"}}},function(e){e.O(0,[774,456,816],(function(){return r=5301,e(e.s=r);var r}));var r=e.O();_N_E=r}]);